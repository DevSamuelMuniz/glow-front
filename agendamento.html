<!DOCTYPE HTML>
<html lang="pt-BR">
	<head>
		<title>GrowTime - Agendamento</title>
		<link rel="icon" 
        type="png" 
        href="images/logo_brilho.png" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<noscript><link rel="stylesheet" href="css/noscript.css" /></noscript>

		<script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
		<script src="js/agendamento.js"></script>

		
		<!-- toast -->
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="fade-in">

				<div id="intro">
					<a href="#" class="image"><img src="images/Logo_GLOWTIME.png" alt="" /></a>
				 </div>

			    
				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Inicio</a></li>
							<li class="active"><a href="agendamento.html">Agendamento</a></li>
							<li><a href="contato.html">Contato</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://www.instagram.com/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
								<span class="date">Equipe Dedicada</span>
									<h1>Faça<br />
									seu agendamento</h1>							    
								</header>

								<!-- Form -->

								<form id="form-schedule" method="post" action="#">
									<div class="row gtr-uniform">
										<div class="col-6 col-12-xsmall">
											<input type="text" name="name" id="nome" placeholder="Nome" required/>
										</div>
										<div class="col-6 col-12-xsmall">
											<input type="text" name="phone" id="telefone" placeholder="Telefone" required/>
										</div>
										<div class="col-12">
											<input type="email" name="email" id="email" placeholder="E-mail" required/>
										</div>
										<div class="col-12">
											<select name="servico" id="servico" required>
												<option value="">Serviços</option>
												<option value="Aroma Essence">Aroma Essence</option>
											</select>
										</div>
										<div class="col-6 col-12-xsmall">
											<input type="date" name="date" id="data_agenda" required/>
										</div>
										<div class="col-6 col-12-xsmall">
											<select name="time" id="horario" required>
												<option value="" disabled selected>Selecione uma hora</option>
												<option value="7:00">7:00</option>
												<!-- Outras opções de horário -->
											</select>
										</div>
										<div class="col-12">
											<ul class="actions">
												<li><input type="submit" class="primary" value="Agendar" onclick="agendarServico()"/></li>
												<li><input type="reset" value="Limpar"/></li>
											</ul>
										</div>
									</div>
								</form>
								
			</div>	

</div>

<script>

function agendarServico(event) {

    // Coleta os valores dos campos do formulário
    const nome = document.getElementById("nome").value;
    const telefone = document.getElementById("telefone").value;
    const email = document.getElementById("email").value;
    const servico = document.getElementById("servico").value;
    const data_agenda = document.getElementById("data_agenda").value;
    const horario = document.getElementById("horario").value;

    // Cria o objeto de dados para enviar
    const agendamentoData = { nome, telefone, email, servico, data_agenda, horario };

    // Faz o POST para a URL /api/form usando fetch
    fetch('https://grow-back.onrender.com/api/agendar', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(agendamentoData)
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro ao enviar o formulário');
        }
        return response.json();
    })
    .then(data => {
        console.log("Formulário enviado com sucesso:", data);
        limparFormulario(); // Limpa o formulário
        carregarAgendamentos(); // Atualiza a lista de agendamentos
    })
  
}

function limparFormulario() {
    document.getElementById("form-schedule").reset();
}
	
</script>
		<!-- Scripts -->
			<script src="js/jquery.min.js"></script>
			<script src="js/jquery.scrollex.min.js"></script>
			<script src="js/jquery.scrolly.min.js"></script>
			<script src="js/browser.min.js"></script>
			<script src="js/breakpoints.min.js"></script>
			<script src="js/util.js"></script>
			<script src="js/main.js"></script>



			<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
            <script>
               emailjs.init("YgXGvFXBtAVSsBzZU"); // Substitua "YOUR_USER_ID" pelo seu ID da EmailJS
            </script>
              
            
			<!-- toast -->
			<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

	</body>
</html>